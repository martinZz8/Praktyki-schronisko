<!DOCTYPE html>

{% load static %}
<html lang="pl">
    <head>
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'styles/style.css' %}">
        <link rel="stylesheet" href="{% static 'fontello/css/fontello.css' %}">
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue-web-storage@4"></script>
    </head>

    <body>
        <div id="app">
            <v-app class="myFont">
                <v-app-bar app>
                    <a @click="toggleActiveSubpage(0)" class="menu_list start inactive" id="0" href="{% url 'home' %}">Start</a>
                    <v-spacer></v-spacer>
                    <ul class="menu_list">
                        <li>
                            <a @click="toggleActiveSubpage(1)" class="menu_list inactive" id="1" href="{% url 'animals' %}">Zaadoptuj mnie</a>
                        </li>
                        <li>
                            <a @click="toggleActiveSubpage(2)" class="menu_list inactive" id="2" href="{% url 'news' %}">Aktualności</a>
                        </li>
                        <li>
                            <a @click="toggleActiveSubpage(3)" class="menu_list inactive" id="3" href="#">O schronisku</a>
                        </li>
                        <li>
                            <a @click="toggleActiveSubpage(4)" class="menu_list inactive" id="4" href="#">Informacje o adopcji</a>
                        </li>
                        <li>
                            <a @click="toggleActiveSubpage(5)" class="menu_list inactive" id="5" href="#">Wesprzyj nas</a>
                        </li>
                        <li>
                            <a @click="toggleActiveSubpage(6)" class="menu_list inactive" id="6" href="#">Kontakt</a>
                        </li>
                    </ul>
                </v-app-bar>
                {% block content %}{% endblock %}
                <v-footer dark padless>
                    <v-card class="flex" flat tile>
                        <v-card-title style="background-color: rgb(5,12,15);">
                            <strong class="subheading">Sprawdź nasze social media!</strong>
                            <v-spacer></v-spacer>
                            <v-btn href="http://www.facebook.com" target="_blank" class="mx-4" dark icon>
                                <v-icon size="24px">mdi-facebook</v-icon>
                            </v-btn>
                            <v-btn href="http://www.twitter.com" target="_blank" class="mx-4" dark icon>
                                <v-icon size="24px">mdi-twitter</v-icon>
                            </v-btn>
                            <v-btn href="http://www.youtube.com" target="_blank" class="mx-4" dark icon>
                                <v-icon size="24px">mdi-youtube</mdi-youtube></v-icon>
                            </v-btn>
                            <v-btn href="http://www.instagram.com" target="_blank" class="mx-4" dark icon>
                                <v-icon size="24px">mdi-instagram</v-icon>
                            </v-btn>
                        </v-card-title>
                        <v-card-text style="background-color: rgb(2,8,12);" class="py-2 white--text text-center">
                            [[ new Date().getFullYear() ]] — <strong>&copy; Schronisko dla Bezdomnych Zwierząt w Rzeszowie</strong>
                        </v-card-text>
                    </v-card>
                </v-footer>
            </v-app>
        </div>
    </body>

</html>

<script>
Vue.use(VueWebStorage.default)

var app = new Vue({
  delimiters: ["[[", "]]"],
  el: '#app',
  vuetify: new Vuetify(),
  data: {
  },
  mounted: function() {
      console.log("Działa mounted", Vue.$localStorage.get('active_subpage'))
      if (window.location.pathname == "/") {
        Vue.$localStorage.set('active_subpage', '0')
        $("#0").removeClass("inactive");
        $("#0").addClass("active");
        console.log('Active subpage jest 0')
      }
  },
  methods: {
      toggleActiveSubpage(number) {
        console.log("Działa funkcja toggleActiveSubpage")
        inactive_element = '#' + Vue.$localStorage.get('active_subpage')
        active_element = '#' + number
        $(".menu_list").on("click", function () {
            $(inactive_element).removeClass("active");
            $(inactive_element).addClass("inactive");
            $(active_element).removeClass("inactive");
            $(active_element).addClass("active");
            console.log('Aktywny element: ', Vue.$localStorage.get('active_subpage'))
        })
        Vue.$localStorage.set('active_subpage', number)
      }
  }
});



</script>